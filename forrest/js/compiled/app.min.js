$(document).ready(function(){var n="8PyTZKuJ1VEQWvDvoOsARLkT8f6N71db",o="https://api.behance.net/v2/users/",a="https://www.behance.net/v2/projects/",l=["codycobb","ashthorp","Filiphds"],d={projectsPerPage:3,nextPageNumber:1},i={commentsPerPage:10,nextPageNumber:1},m=[],u=mixitup(".projects",{selectors:{target:".project"},animation:{enable:!0,duration:300,easing:"ease-in-out"},behavior:{liveSort:!0}});function s(e,t){$.ajax({method:"GET",dataType:"jsonp",url:e,success:t,error:function(e){throw new Error("Unhandled AJAX Error: ",e)}})}function p(e,t){var o=$(e).html();return Template7.compile(o)(t)}function g(e){return moment.unix(e).format("Do MMM YYYY")}function t(e){for(var t=0;t<l.length;t++)s(o+l[t]+"/projects?client_id="+n+"&per_page="+d.projectsPerPage+"&page="+e,h);d.nextPageNumber++}function r(t,o){s(a+t+"?api_key="+n,function(e){!function(e){console.log(e);var t=e.project,o={articles:[],creators:[],fieldsString:"",description:null,creationDate:g(t.published_on),projectName:t.name,stats:{likes:t.stats.appreciations,views:t.stats.views,comments:t.stats.comments},projectID:t.id,behanceURL:t.url};""!=t.description&&(o.description=t.description);for(var n=0;n<t.modules.length;n++){var a=t.modules[n];switch(a.type){case"image":o.articles.push(a.sizes.max_1200);break;case"media_collection":for(var s=a.components,r=0;r<s.length;r++)o.articles.push(s[r].sizes.max_1200)}}for(var i=0;i<t.owners.length;i++){var c=t.owners[i],l={};l.url=c.url,l.name=c.display_name,i!=t.owners.length-1&&(l.name+=","),o.creators.push(l)}o.fieldsString=t.fields.join(", ");var d=p("#projectDetailsTemplate",o);$("#modalContent").append(d),$("#images").slick({initialSlide:1,slidesToShow:1,slidesToScroll:1,infinite:!0,adaptiveHeight:!1,arrows:!0,prevArrow:"<i class='slick-prev fa fa-angle-left'>Previous</i>",nextArrow:"<i class='slick-next fa fa-angle-right'>Right</i>",responsive:[{breakpoint:1e3,settings:{adaptiveHeight:!0,arrows:!1}}]}),$(window).trigger("resize")}(e),c(t),o&&o()})}function c(e){s(a+e+"/comments?client_id="+n+"&per_page="+i.commentsPerPage+"&page="+i.nextPageNumber,function(e){0<e.comments.length?(!function(e){console.log(e);var t=e.comments,o=[];if(0<t.length){for(var n=0;n<t.length;n++){var a=t[n],s={commenter:{name:a.user.display_name,image:a.user.images[115],link:a.user.url},comment:a.comment,publishedOn:g(a.created_on)},r=p("#commentTemplate",s);o.push(r)}$("#comments").append(o)}t.length<i.commentsPerPage&&$("#loadMoreComments").hide()}(e),i.nextPageNumber++,$("#loadMoreComments").removeClass("disabledButton")):$("#loadMoreComments").hide()})}function h(e){console.log(e);var t=e.projects,o=$(".project").length;if(t.length<d.projectsPerPage&&(m.push(!1),m.length>=l.length&&$("#loadMoreProjects").hide()),0<t.length)for(var n=0;n<t.length;n++){o+=1;var a=t[n],s={coverImage:a.covers[404],projectName:a.name,stats:{likes:a.stats.appreciations,views:a.stats.views,comments:a.stats.comments},projectID:a.id,publishedOn:a.published_on,creator:null,creatorID:[],counter:o};1<a.owners.length?s.creator="Multiple Owners":s.creator=a.owners[0].display_name;for(var r=0;r<a.owners.length;r++){var i=a.owners[r];s.creatorID.push(i.id)}var c=p("#projectTemplate",s);u.append(c,!1)}$("#loadMoreProjects").removeClass("disabledButton")}function v(){$("#loader").fadeToggle({duration:300,easing:"swing"})}function f(e){$("#modalMask").fadeToggle({duration:300,easing:"swing",complete:e})}function b(){$("body").toggleClass("modalShowing")}$(document).on("click",".projectInner",function(e){e.preventDefault(),v(),f(),r(this.dataset.projectid,v),b()}),$(".closeIcon").on("click",function(){i.nextPageNumber=1,b(),f(function(){$("#modalContent").empty()})}),$(document).on("click","#loadMoreComments",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreComments").addClass("disabledButton"),c(this.dataset.projectid))}),$("#loadMoreProjects").on("click",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreProjects").addClass("disabledButton"),t(d.nextPageNumber))}),$(".sortButton").on("click",function(){var e=$(".orderButton.active")[0].dataset.sortonly;$(".sortButton").removeClass("active"),$(this).addClass("active"),u.sort(this.dataset.sortonly+":"+e)}),$(".orderButton").on("click",function(){var e=$(".sortButton.active")[0].dataset.sortonly;$(".orderButton").removeClass("active"),$(this).addClass("active"),u.sort(e+":"+this.dataset.sortonly)}),t(d.nextPageNumber)});