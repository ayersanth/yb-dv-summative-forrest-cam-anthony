$(document).ready(function(){var n="8PyTZKuJ1VEQWvDvoOsARLkT8f6N71db",o="https://api.behance.net/v2/users/",a="https://www.behance.net/v2/projects/",c=["codycobb","ashthorp","Filiphds"],m={projectsPerPage:3,nextPageNumber:1},i={commentsPerPage:10,nextPageNumber:1},d=[],p=mixitup(".projects",{selectors:{target:".project"},animation:{enable:!0,duration:300,easing:"ease-in-out"},behavior:{liveSort:!0}});function r(e,t){$.ajax({method:"GET",dataType:"jsonp",url:e,success:t,error:function(e){throw new Error("Unhandled AJAX Error: ",e)}})}function u(e,t){var o=$(e).html();return Template7.compile(o)(t)}function t(e){for(var t=0;t<c.length;t++)r(o+c[t]+"/projects?client_id="+n+"&per_page="+m.projectsPerPage+"&page="+e,g);m.nextPageNumber++}function s(t,o){r(a+t+"?api_key="+n,function(e){!function(e){console.log(e);var t=e.project,o={articles:[],creators:[],fieldsString:"",description:null,creationDate:moment.unix(t.published_on).format("Do MMM YYYY"),projectName:t.name,stats:{likes:t.stats.appreciations,views:t.stats.views,comments:t.stats.comments},projectID:t.id,behanceURL:t.url};""!=t.description&&(o.description=t.description);for(var n=0;n<t.modules.length;n++){var a=t.modules[n];switch(a.type){case"image":o.articles.push(a.sizes.max_1200);break;case"media_collection":for(var r=a.components,s=0;s<r.length;s++)o.articles.push(r[s].sizes.max_1200)}}for(var i=0;i<t.owners.length;i++){var l=t.owners[i],c={};c.url=l.url,c.name=l.display_name,i!=t.owners.length-1&&(c.name+=","),o.creators.push(c)}o.fieldsString=t.fields.join(", ");var m=u("#projectDetailsTemplate",o);$("#modalContent").append(m),$("#images").slick({initialSlide:1,slidesToShow:1,slidesToScroll:1,infinite:!0,adaptiveHeight:!1,arrows:!0,prevArrow:"<i class='slick-prev fa fa-angle-left'>Previous</i>",nextArrow:"<i class='slick-next fa fa-angle-right'>Right</i>",responsive:[{breakpoint:1e3,settings:{adaptiveHeight:!0,arrows:!1}}]}),$(window).trigger("resize")}(e),l(t),o&&o()})}function l(e){r(a+e+"/comments?client_id="+n+"&per_page="+i.commentsPerPage+"&page="+i.nextPageNumber,function(e){0<e.comments.length?(!function(e){console.log(e);var t=e.comments,o=[];if(0<t.length){for(var n=0;n<t.length;n++){var a=t[n],r={commenter:{name:a.user.display_name,image:a.user.images[115],link:a.user.url},comment:a.comment,publishedOn:moment.unix(a.created_on).format("Do MMM YYYY")},s=u("#commentTemplate",r);o.push(s)}$("#comments").append(o)}t.length<i.commentsPerPage&&$("#loadMoreComments").hide()}(e),i.nextPageNumber++,$("#loadMoreComments").removeClass("disabledButton")):$("#loadMoreComments").hide()})}function g(e){console.log(e);var t=e.projects,o=$(".project").length;if(t.length<m.projectsPerPage&&(d.push(!1),d.length>=c.length&&$("#loadMoreProjects").hide()),0<t.length)for(var n=0;n<t.length;n++){o+=1;var a=t[n],r={coverImage:a.covers[404],projectName:a.name,stats:{likes:a.stats.appreciations,views:a.stats.views,comments:a.stats.comments},projectID:a.id,publishedOn:a.published_on,creator:null,creatorID:[],counter:o};1<a.owners.length?r.creator="Multiple Owners":r.creator=a.owners[0].display_name;for(var s=0;s<a.owners.length;s++){var i=a.owners[s];r.creatorID.push(i.id)}var l=u("#projectTemplate",r);p.append(l,!1)}$("#loadMoreProjects").removeClass("disabledButton")}function h(){$("#loader").fadeToggle({duration:300,easing:"swing"})}function f(e){$("#modalMask").fadeToggle({duration:300,easing:"swing",complete:e})}function v(){$("body").toggleClass("modalShowing")}$(document).on("click",".projectInner",function(e){e.preventDefault(),h(),f(),s(this.dataset.projectid,h),v()}),$(".closeWrapper").on("click",function(){i.nextPageNumber=1,v(),f(function(){$("#modalContent").empty()})}),$(document).on("click","#loadMoreComments",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreComments").addClass("disabledButton"),l(this.dataset.projectid))}),$("#loadMoreProjects").on("click",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreProjects").addClass("disabledButton"),t(m.nextPageNumber))}),t(m.nextPageNumber)});