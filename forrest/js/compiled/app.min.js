$(document).ready(function(){var n="8PyTZKuJ1VEQWvDvoOsARLkT8f6N71db",o="https://api.behance.net/v2/users/",s="https://www.behance.net/v2/projects/",c=["codycobb","ashthorp","Filiphds"],d={projectsPerPage:3,nextPageNumber:1},t={commentsPerPage:5,nextPageNumber:1},a=[],u=[],m=mixitup(".projects",{selectors:{target:".project"},animation:{enable:!0,queueLimit:10,duration:300,easing:"ease-in-out"}});function r(e,o){var n=$.ajax({method:"GET",dataType:"jsonp",url:e,success:function(e){for(var t=0;t<a.length;t++)a[t]==n&&a.splice(t,1);o(e)},error:function(e){throw new Error("Unhandled AJAX Error: ",e)}});a.push(n)}function p(e,t){var o=$(e).html();return Template7.compile(o)(t)}function i(e){for(var t=0;t<c.length;t++)r(o+c[t]+"/projects?client_id="+n+"&per_page="+d.projectsPerPage+"&page="+e,f);d.nextPageNumber++}function l(t,o){r(s+t+"?api_key="+n,function(e){!function(e){console.log(e);for(var t=e.project,o={articles:[],fields:[],fieldsString:"",description:t.description,creationDate:moment.unix(t.published_on).format("Do MMM YYYY"),projectName:t.name,stats:{likes:t.stats.appreciations,views:t.stats.views,comments:t.stats.comments},projectID:t.id,behanceURL:t.url},n=0;n<t.modules.length;n++){var s=t.modules[n];switch(s.type){case"image":o.articles.push(s.sizes.max_1200);break;case"media_collection":for(var a=s.components,r=0;r<a.length;r++)o.articles.push(a[r].sizes.max_1200);break;default:console.log("No support has been added for this data type: "+s.type)}}for(var i=0;i<t.fields.length;i++)o.fields.push(t.fields[i]),o.fieldsString+=o.fields[i],i<t.fields.length-1&&(o.fieldsString+=", ");var l=p("#projectDetailsTemplate",o);$("#modalContent").append(l),$("#images").slick({initialSlide:1,slidesToShow:1,slidesToScroll:1,infinite:!0,adaptiveHeight:!1,arrows:!0,prevArrow:"<i class='slick-prev fa fa-angle-left'>Previous</i>",nextArrow:"<i class='slick-next fa fa-angle-right'>Right</i>",responsive:[{breakpoint:1e3,settings:{adaptiveHeight:!0,arrows:!1}}]}),$(window).trigger("resize")}(e),g(t),o&&o()})}function g(e){r(s+e+"/comments?client_id="+n+"&per_page="+t.commentsPerPage+"&page="+t.nextPageNumber,function(e){0<e.comments.length?(!function(e){console.log(e);var t=e.comments,o=[];if(0<t.length){for(var n=0;n<t.length;n++){var s=t[n],a={commenter:{name:s.user.display_name,image:s.user.images[115],link:s.user.url},comment:s.comment,publishedOn:moment.unix(s.created_on).format("Do MMM YYYY")},r=p("#commentTemplate",a);o.push(r)}$("#comments").append(o)}}(e),t.nextPageNumber++,$("#loadMoreComments").removeClass("disabledButton")):$("#loadMoreComments").hide()})}function f(e){console.log(e);var t=e.projects,o=$(".project").length;if(t.length<d.projectsPerPage&&(u.push(!1),u.length>=c.length&&(console.log("no more projects to load"),$("#loadMoreProjects").hide())),0<t.length)for(var n=0;n<t.length;n++){o+=1;var s=t[n],a={coverImage:s.covers[404],projectName:s.name,stats:{likes:s.stats.appreciations,views:s.stats.views,comments:s.stats.comments},projectID:s.id,publishedOn:s.published_on,creator:null,creatorID:[],counter:o};1<s.owners.length?a.creator="Multiple Owners":a.creator=s.owners[0].display_name;for(var r=0;r<s.owners.length;r++){var i=s.owners[r];a.creatorID.push(i.id)}var l=p("#projectTemplate",a);m.append(l,!1)}$("#loadMoreProjects").removeClass("disabledButton")}function h(){$("#loader").fadeToggle({duration:300,easing:"swing"})}function v(e){$("#modalMask").fadeToggle({duration:300,easing:"swing",complete:e})}function b(){$("body").toggleClass("modalShowing")}function w(){t.nextPageNumber=1,b(),v(function(){$("#modalContent").empty()})}$(document).on("click",".projectInner",function(e){e.preventDefault(),h(),v(),l(this.dataset.projectid,h),b()}),$(document).on("click","#modalMask",function(e){e.target==e.currentTarget&&w()}),$(".closeWrapper").on("click",function(){w()}),$(document).on("click","#loadMoreComments",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreComments").addClass("disabledButton"),g(this.dataset.projectid))}),$("#loadMoreProjects").on("click",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreProjects").addClass("disabledButton"),i(d.nextPageNumber))}),$("#testOrdering").on("click",function(e){e.preventDefault(),m.filter($(".544146")).then()}),$("#showAll").on("click",function(e){e.preventDefault(),m.show().then()}),$("#sortAscending").on("click",function(e){e.preventDefault(),m.sort("published-on:asc").then(function(){console.log("am i working?")})}),$("#sortDescending").on("click",function(e){e.preventDefault(),m.sort("published-on:desc").then(function(){console.log("am i working?")})}),i(d.nextPageNumber)});