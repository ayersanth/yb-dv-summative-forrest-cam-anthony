$(document).ready(function(){var n="8PyTZKuJ1VEQWvDvoOsARLkT8f6N71db",o="https://api.behance.net/v2/users/",a="https://www.behance.net/v2/projects/",u=["codycobb","ashthorp","Filiphds"],p={projectsPerPage:3,nextPageNumber:1},c={commentsPerPage:10,nextPageNumber:1},g={},h=mixitup(".projects",{selectors:{target:".project",control:"[data-mixitup-control]"},animation:{enable:!0,duration:300,easing:"ease-in-out"},behavior:{liveSort:!0}});function s(e,t,o){$.ajax({method:"GET",dataType:"jsonp",url:e,success:function(e){t(e,o)},error:function(e){throw new Error("Unhandled AJAX Error: ",e)}})}function v(e,t){var o=$(e).html();return Handlebars.compile(o)(t)}function m(e){return moment.unix(e).format("Do MMM YYYY")}function t(e){for(var t=0;t<u.length;t++)s(o+u[t]+"/projects?client_id="+n+"&per_page="+p.projectsPerPage+"&page="+e,l,u[t]);p.nextPageNumber++}function r(t,o){s(a+t+"?api_key="+n,function(e){!function(e){console.log(e);var t=e.project,o={articles:[],creators:[],fieldsString:"",description:null,creationDate:m(t.published_on),projectName:t.name,stats:{likes:t.stats.appreciations,views:t.stats.views,comments:t.stats.comments},projectID:t.id,behanceURL:t.url};""!=t.description&&(o.description=t.description);for(var n=0;n<t.modules.length;n++){var a=t.modules[n];switch(a.type){case"image":o.articles.push(a.sizes.max_1200);break;case"media_collection":for(var s=a.components,r=0;r<s.length;r++)o.articles.push(s[r].sizes.max_1200)}}for(var i=0;i<t.owners.length;i++){var c=t.owners[i],l={};l.url=c.url,l.name=c.display_name,i!=t.owners.length-1&&(l.name+=","),o.creators.push(l)}o.fieldsString=t.fields.join(", ");var d=v("#projectDetailsTemplate",o);$("#modalContent").append(d),$("#images").slick({initialSlide:1,slidesToShow:1,slidesToScroll:1,infinite:!0,adaptiveHeight:!1,arrows:!0,prevArrow:"<i class='slick-prev fa fa-angle-left'>Previous</i>",nextArrow:"<i class='slick-next fa fa-angle-right'>Right</i>",responsive:[{breakpoint:1e3,settings:{adaptiveHeight:!0,arrows:!1}}]}),$(window).trigger("resize")}(e),i(t),o&&o()})}function i(e){s(a+e+"/comments?client_id="+n+"&per_page="+c.commentsPerPage+"&page="+c.nextPageNumber,function(e){!function(e){console.log(e);var t=e.comments,o=[],n=!1;if(0<t.length){for(var a=0;a<t.length;a++){var s=t[a],r={commenter:{name:s.user.display_name,image:s.user.images[115],link:s.user.url},comment:s.comment,publishedOn:m(s.created_on)},i=v("#commentTemplate",r);o.push(i)}$("#comments").append(o)}t.length<c.commentsPerPage&&($("#loadMoreComments").text("No More Comments to Display").css("cursor","not-allowed"),n=!0);n||$("#loadMoreComments").removeClass("disabledButton")}(e),c.nextPageNumber++})}function l(e,t){console.log(e);var o=e.projects,n=$(".project").length,a=!1;if(o.length<p.projectsPerPage){if(!g[t]){g[t]=!1;for(var s=u.length-1;0<=s;s--)if(u[s]===t){u.splice(s,1);break}}3<=Object.keys(g).length&&($("#loadMoreProjects").text("No More Projects to Load").css("cursor","not-allowed"),a=!0)}if(0<o.length)for(var r=0;r<o.length;r++){n+=1;var i=o[r],c={coverImage:i.covers[404],projectName:i.name,stats:{likes:i.stats.appreciations,views:i.stats.views,comments:i.stats.comments},projectID:i.id,publishedOn:i.published_on,creator:null,creatorID:[],counter:n};1<i.owners.length?c.creator="Multiple Owners":c.creator=i.owners[0].display_name;for(var l=0;l<i.owners.length;l++){var d=i.owners[l];c.creatorID.push(d.id)}var m=v("#projectTemplate",c);h.append(m,!1)}a||$("#loadMoreProjects").removeClass("disabledButton")}function d(){$("#loader").fadeToggle({duration:300,easing:"swing"})}function f(e){$("#modalMask").fadeToggle({duration:300,easing:"swing",complete:e})}function b(){$("body").toggleClass("modalShowing")}$(document).on("click",".projectInner",function(e){e.preventDefault(),d(),f(),r(this.dataset.projectid,d),b()}),$(".closeIcon").on("click",function(){c.nextPageNumber=1,b(),f(function(){$("#modalContent").empty()})}),$(document).on("click","#loadMoreComments",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreComments").addClass("disabledButton"),i(this.dataset.projectid))}),$("#loadMoreProjects").on("click",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreProjects").addClass("disabledButton"),t(p.nextPageNumber))}),$(".sortButton").on("click",function(){var e=$(".orderButton.active")[0].dataset.sortonly;$(".sortButton").removeClass("active"),$(this).addClass("active"),h.sort(this.dataset.sortonly+":"+e)}),$(".orderButton").on("click",function(){var e=$(".sortButton.active")[0].dataset.sortonly;$(".orderButton").removeClass("active"),$(this).addClass("active"),h.sort(e+":"+this.dataset.sortonly)}),$(".filterButton").on("click",function(){$(".filterButton").removeClass("active"),$(this).addClass("active")}),t(p.nextPageNumber),$("[data-toggle='tooltip']").tooltip({trigger:"hover"})});